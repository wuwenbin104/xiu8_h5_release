let UITools={isShowWaiting:!1,isWaitLoadRes:!1,showWaiting:function(e,t,n,o){console.log("!!!!!!!!0000showWaiting!!!!!!!!!!!!!!!");let i=cc.director.getScene(),l=i.name;if(null==i)return;let a=i.getChildByName("Canvas");null!=a&&(a.getChildByName("UITools_loading")||UITools.isShowWaiting||(UITools.isShowWaiting=!0,UITools.isWaitLoadRes=!0,cc.loader.loadRes("Prefab/loadingPrefab",(o,i)=>{if(o)return UITools.isWaitLoadRes=!1,void cc.log("\u52a0\u8f09\u5931\u6557, "+o);if(!(i instanceof cc.Prefab))return UITools.isWaitLoadRes=!1,void cc.log("\u52a0\u8f09\u8cc7\u6e90\u6210\u529f, \u4f46\u8a72\u5c0d\u8c61\u4e0d\u662fPrefab");var s=cc.instantiate(i);UITools.isWaitLoadRes=!1,s.name="UITools_loading",null!=a&&(l==cc.director.getScene().name?(a.insertChild(s,999),s.getChildByName("label").getComponent("cc.Label").string=n||"",0==t&&s.getChildByName("loading").removeComponent("cc.BlockInputEvents"),e&&e>0&&(UITools.timeHandel=setTimeout(()=>{console.log("!!!!!!!!TimeOut!!!!!!!!!!!!!!!!!"),UITools.hideWaiting()},e))):cc.log("====SceneName=",l,"===cc.director.getScene().name=",cc.director.getScene().name))})))},showWaitingEx:function(e,t,n,o){null!=t&&(t.getChildByName("UITools_loading")||UITools.isShowWaiting||(UITools.isShowWaiting=!0,UITools.isWaitLoadRes=!0,console.log("======UITools.showWaitingEx===="),cc.loader.loadRes("Prefab/loadingPrefab",(i,l)=>{if(i)UITools.isWaitLoadRes=!1;else if(l instanceof cc.Prefab){var a=cc.instantiate(l);UITools.isWaitLoadRes=!1,a.name="UITools_loading",t.insertChild(a,999),a.getChildByName("label").getComponent("cc.Label").string=o||"",0==n&&a.getChildByName("loading").removeComponent("cc.BlockInputEvents"),e&&e>0&&(UITools.timeHandel=setTimeout(()=>{UITools.hideWaitingEx()},e))}else UITools.isWaitLoadRes=!1})))},hideWaitingEx:function(e){if(UITools.isShowWaiting=!1,null!=UITools.timeHandel&&clearTimeout(UITools.timeHandel),null!=e){var t=e.getChildByName("UITools_loading");t&&(UITools.isWaitLoadRes=!1,t.removeFromParent(),t.destroy()),1==UITools.isWaitLoadRes&&(UITools.timeHandel=setTimeout(()=>{UITools.hideWaitingEx(e)},100))}},hideWaiting:function(){UITools.isShowWaiting=!1,null!=UITools.timeHandel&&clearTimeout(UITools.timeHandel),console.log("======UITools.hideWaiting====");let e=cc.director.getScene();if(null==e)return;let t=e.getChildByName("Canvas");if(null!=t){var n=t.getChildByName("UITools_loading");n&&(console.log("!!!!!!!!hideWaiting!!!!!!!!!!!!!!!!"),UITools.isWaitLoadRes=!1,n.removeFromParent(),n.destroy()),1==UITools.isWaitLoadRes&&(UITools.timeHandel=setTimeout(()=>{UITools.hideWaiting()},100))}},ShowTipNode:function(e,t,n){cc.loader.loadRes("Prefab/TipNode",(o,i)=>{let l=cc.instantiate(i);l.getComponent("tipManage").init(e,t),null!=n&&(l.angle=n),l.parent=cc.director.getScene().getChildByName("Canvas")})},showAlert:function(e,t,n,o,i){cc.loader.loadRes("Prefab/alert/prefabAlert",(l,a)=>{let s=cc.instantiate(a);s.getComponent("alert").init(e,t,n,o,i),s.parent=cc.director.getScene().getChildByName("Canvas")})},timeToDate:function(e){var t=new Date(e),n=t.getFullYear(),o=t.getMonth()+1;o=o>=10?o:"0"+o;var i=t.getDate();i=i>=10?i:"0"+i;var l=t.getHours();l=l>=10?l:"0"+l;var a=t.getMinutes();a=a>=10?a:"0"+a;var s=t.getSeconds();return n+"-"+o+"-"+i+" "+l+":"+a+":"+(s=s>=10?s:"0"+s)},timeToYYYYMMDD:function(e){var t=new Date(e),n=t.getFullYear(),o=t.getMonth()+1;o=o>=10?o:"0"+o;var i=t.getDate();return n+"-"+o+"-"+(i=i>=10?i:"0"+i)},timeToHHMMSS:function(e){var t=new Date(e);return(t.getHours()<10?"0"+t.getHours():t.getHours())+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":"+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())},SwitchScence:function(e,t){UITools.showWaiting(-1,!0);let n=cc.director.getScene().name;"transition"!=n&&("New Node"==n&&(n="main"),null==e&&(e="main"),null==Constants.PerScenceName&&(Constants.PerScenceName=[]),e!=n&&null!=Constants.PerScenceName&&Constants.PerScenceName.push(n),t?UITools.SwitchScenceEx(e,t):UITools.SwitchScenceEx(e))},backScene:function(){UITools.showWaiting(-1,!0),cc.log("Constants.PerScenceName=",Constants.PerScenceName);let e="main";null!=Constants.PerScenceName||0!=Constants.PerScenceName.length?(null!=Constants.PerScenceName&&(e=Constants.PerScenceName.pop()),UITools.SwitchScenceEx(e)):UITools.SwitchScenceEx(e)},SwitchScenceEx:function(e,t){t&&cc.log("====ScenceName=",e+",callback"),cc.director.loadScene("transition",()=>{cc.director.getScene().getChildByName("Canvas").getComponent("transition").SwitchScene(e,t)})},uuid:function(){for(var e=[],t="0123456789abcdef",n=0;n<36;n++)e[n]=t.substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")},createWaterMark:function(){if(cc.sys.isBrowser){let t=document.getElementById("watermark");if(null==t||0==t.length){var e=document.createElement("div");e.id="watermark",e.style.position="absolute",e.style.top=0,e.style.left=0,e.style.zIndex=-2,e.style.width="100%",e.style.height="100%",e.style.backgroundColor="#0f011a",document.getElementById("Cocos2dGameContainer").appendChild(e)}}},createDIV:function(){if(cc.sys.isBrowser){let n=document.getElementById("svga-div");if(null==n||0==n.length){var e=document.createElement("div");e.id="svga-div",e.style.width="100%",e.style.height="100%",e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.pointerEvents="none",e.style.pointerEvents="none";var t=document.createElement("canvas");t.id="svga-canvas",t.width=720,t.height=1280,t.style.width="100%",t.style.height="100%",e.appendChild(t),document.getElementById("GameDiv").appendChild(e)}}},deleteDIV:function(e){if(cc.sys.isBrowser){let t=document.getElementById(e);t&&t.remove()}},CreateH5Blur:function(){cc.sys.isBrowser&&cc.loader.loadRes("0",(e,t)=>{var n=document.createElement("style");n.type="text/css",n.innerHTML=".blur{filter: url("+t.url+"#0);-webkit-filter: blur(9px);-moz-filter: blur(9px);-ms-filter: blur(9px);",n.innerHTML+="filter: blur(9px);",n.innerHTML+="filter: progid: DXImageTransform.Microsoft.Blur(PixelRadius=10, MakeShadow=false);",n.innerHTML+="}",document.getElementsByTagName("HEAD").item(0).appendChild(n)})},CreateBlurDIV:function(e){if(!cc.sys.isBrowser)return;UITools.deleteDIV("blur-div");let t=document.getElementById("blur-div");if(null==t||0==t.length){var n=document.createElement("div");n.id="blur-div",n.style.width="100%",n.style.height="100%",n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.style.pointerEvents="none";var o=document.createElement("img");o.id="blur-img",o.className="blur",o.style.width="100%",o.style.height="100%",o.src=e,n.appendChild(o);let t=document.getElementById("GameDiv");var i=t.firstChild;t.insertBefore(n,i)}},UpDateDivTop:function(e,t){if(!cc.sys.isBrowser)return;let n=document.getElementById(e);null!=n&&(n.style.top=t+"px")},addClickEvent:function(e,t,n,o,i){console.log(n+":"+o);var l=new cc.Component.EventHandler;l.target=t,l.component=n,l.handler=o,l.customEventData=i;let a=e.getComponent(cc.Button);a||((a=e.addComponent(cc.Button)).target=e),a.clickEvents=[],a.clickEvents.push(l)},addSlideEvent:function(e,t,n,o,i){var l=new cc.Component.EventHandler;l.target=t,l.component=n,l.handler=o,l.customEventData=i,e.getComponent(cc.Slider).slideEvents.push(l)},addEscEvent:function(e){cc.eventManager.addListener({event:cc.EventListener.KEYBOARD,onKeyPressed:function(e,t){},onKeyReleased:function(e,t){e==cc.KEY.back&&cc.vv.alert.show("\u63d0\u793a","\u786e\u5b9a\u8981\u9000\u51fa\u6e38\u620f\u5417\uff1f",function(){cc.game.end()},!0)}},e)}};